<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>小丁大数据</title>
	<script src="../static/js/jquery-3.5.1.min.js" type="text/javascript"></script>
	<link href="../static/css/bootstrap.min.css" rel="stylesheet">
</head>
<style>
	button{
				margin-left: 2.1875rem;
			}
</style>
<body style="background-image: url(../static/images/bg1.jpg); background: cover;">


<div style=" position: relative; top: 15rem; width: 21%; height: 30% ; margin: 0 auto;  border-radius: 0.625rem; background-color: #004085;min-width: 23.75rem;">
	<div style="width: 100%; height: 100%; background-color: white;padding: 4rem;  border-radius: 0.625rem;">
		<h2 align="center">用户登录</h2>
		<br/>
		用户名：<input type="text" class="form-control" style="width: 15rem;" id="userid" >
		<br/>
		密码：<input type="password" style="width: 15rem;" class="form-control" id="password" >
		<div style="color:red;text-align: center;" id="errmsg" ></div>

		<hr/>


	<button type="button" class="btn btn-primary" id="btnLogin">登录</button>
<!-- 		<button type="button" class="btn btn-primary"  id="btnLogin2">注册</button> -->

	</div>

</div>

<script>
        $(function () {
            $('#btnLogin').click(function () {
                userid = $('#userid').val()
                password = $('#password').val()
	
                $.ajax({
                    url: '/login_ajax_check/',
                    type:'post', //请求提交的方式get/post
                    dataType:'json',
					data:{"userid":userid,"password":password},
					}).done(function (data) {    //回调函数获取的data就是view返回的json数据
						if(data.state == 0){
							$('#errmsg').show().html('用户名或密码错误') //jQuery动态添加网页内容
							}
						else {
							location.href='/login/'      //验证成功登录首页
                    }
                }).fail(function () {
                    alert('服务器请求成功')
                })
            })
        })
    </script>

</body>
</html>


